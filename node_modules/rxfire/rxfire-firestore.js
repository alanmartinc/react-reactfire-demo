!function(n,t,i,o){"use strict";function r(n,e){return function(e,r){return new i.Observable(function(n){return{unsubscribe:e.onSnapshot(r||{},n)}})}(n,e)}function e(n,e){return r(n,e)}function c(n,e){return r(n,e)}function u(n){return e(n)}function d(n,e){var r;return t.__assign(t.__assign({},n.data()),e?((r={})[e]=n.id,r):null)}var f=["added","modified","removed"],a=function(i){return o.filter(function(n){for(var e=!1,r=0;r<n.length;r++){var t=n[r];if(i&&0<=i.indexOf(t.type)){e=!0;break}}return e})},s=o.filter(function(n){return 0<n.length});function l(e,n,r){return void 0===r&&(r=f),n.forEach(function(n){-1<r.indexOf(n.type)&&(e=function(n,e){switch(e.type){case"added":n[e.newIndex]&&n[e.newIndex].doc.id===e.doc.id||n.splice(e.newIndex,0,e);break;case"modified":null!=n[e.oldIndex]&&n[e.oldIndex].doc.id!==e.doc.id||(e.oldIndex!==e.newIndex?(n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e)):n[e.newIndex]=e);break;case"removed":n[e.oldIndex]&&n[e.oldIndex].doc.id===e.doc.id&&n.splice(e.oldIndex,1)}return n}(e,n))}),e}function p(n,e){return void 0===e&&(e=f),c(n).pipe(o.map(function(n){return n.docChanges()}),a(e),s)}function x(n){return c(n).pipe(o.map(function(n){return n.docs}))}n.auditTrail=function(n,e){return p(n,e).pipe(o.scan(function(n,e){return t.__spreadArrays(n,e)},[]))},n.collection=x,n.collectionChanges=p,n.collectionData=function(n,e){return x(n).pipe(o.map(function(n){return n.map(function(n){return d(n,e)})}))},n.doc=u,n.docData=function(n,e){return u(n).pipe(o.map(function(n){return d(n,e)}))},n.fromCollectionRef=c,n.fromDocRef=e,n.fromRef=r,n.snapToData=d,n.sortedChanges=function(n,r){return p(n,r).pipe(o.scan(function(n,e){return l(n,e,r)},[]))}}(this.rxfire=this.rxfire||{},tslib,rxjs,rxjs.operators);
//# sourceMappingURL=rxfire-firestore.js.map
